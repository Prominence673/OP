<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Iniciar Sesión - KAPIFLY</title>
  <link rel="stylesheet" href="../CSS/form.css" />
  <link rel="stylesheet" href="../CSS/header-footer.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>
<body>
  <header class="site-header">
    <div class="container header-container">
      <div class="logo-titulo">
        <a href="index.html">
          <img src="../../SOURCE/KAPIFLY.png" alt="Logo Kapifly" class="logo-img-real">
        </a>
      </div>
      <nav class="main-nav">
        <ul class="nav-menu">
          <li><a href="index.html">Inicio</a></li>
          <li class="dropdown-parent">
            <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">
              Paquetes <i class="fa-solid fa-chevron-down"></i>
            </button>
            <ul class="submenu">
              <li><a href="coches.html">Alquiler coches</a></li>
              <li><a href="paquetes.html">Paquetes turisticos</a></li>
              <li><a href="estadias.html">Estadias</a></li>
              <li><a href="pasajes.html">Pasajes aéreos</a></li>
            </ul>
          </li>
          <li><a href="contacto.html">Contacto</a></li>
        </ul>
      </nav>
      <div class="user-menu">
        <a href="carrito.html" aria-label="Ir al carrito de compras" class="icon-link">
          <i class="fa-solid fa-cart-shopping user-icon"></i>
        </a>
        <button id="user-menu-btn" aria-label="Menú de usuario" class="icon-btn">
          <i class="fa-solid fa-user user-icon"></i>
        </button>
        <button id="toggle-dark" class="darkmode-toggle" aria-label="Cambiar modo oscuro">
          <i class="fa-solid fa-moon" id="darkmode-icon"></i>
        </button>
        <ul class="dropdown">
          <li id="user"></li>
          <li id="panel_usuario"><a href="panel_usuario.html">Panel</a></li>
          <li id="panel_admin" style="display: none;"><a href="../ADMIN-HTML/index.html">Panel Admin</a></li>
          <li id="login_panel"><a href="login.html">Iniciar sesión</a></li>
          <li id="register_panel"><a href="register.html">Registrarse</a></li>
          <li><a href="#" id="logout">Cerrar Sesion</a></li>
        </ul>
      </div>
    </div>
  </header>

<main>
  <div class="form-container">
    <h2>Verificacion Email</h2>
    <form method="post" id="verificacionEmail">
    <input type="hidden" name="action" value="verificar_email">
      <div id="mensajeDiv"></div>
      <button type="submit">Verificar</button>
    </form>
   <script src="../../BACK/JS LOGICA/submitdata.js"></script>
    <script>
    //submitdata
    document.addEventListener("DOMContentLoaded", () => {
  new FormHandler({
    formSelector: "#verificacionEmail", //id del form
    endpoint: "../../BACK/PHP/user_panel.php",  //PHP
    messageTarget: mensajeDiv, //mensaje
    onSuccess: () => { //esto redirige al usuario si se cargo los datos al servidor exitosamente
      window.location.href = "index.html";
    }
  });
  });
  </script>
    <script src="../../BACK/JS LOGICA/sessionActivate.js"></script>
    <script>
    const actions = new SessionActions();
    actions.Disabled(["#login_panel", "#register_panel"],"none", "0.5", "none");
actions.Activate(["#panel_usuario", "#logout"], "none", "0.5", "none" );
    actions.InsertData("#user", "nombre");
    actions.AdminOnlyToggle(["#panel_admin"], []);
    </script>
    <script src="../JS DISEÑO/menu.js"></script>
  </div>
</main>
<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-brand">
      <img src="../../SOURCE/KAPIFLY.png" alt="KAPIFLY Logo" class="footer-logo-img" style="height:48px;">      
      <span class="footer-desc">Viajes y experiencias únicas</span>
    </div>
    <div class="footer-links">
      <a href="../HTML/contacto.html" class="footer-link">Contacto</a>
      <a href="#" class="footer-link">Términos</a>
      <a href="#" class="footer-link">Privacidad</a>
      <a href="../HTML/contacto.html" class="footer-link">Preguntas frecuentes</a>
    </div>
    <div class="footer-social">
      <a href="#" class="footer-social-link" title="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" class="footer-social-link" title="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="#" class="footer-social-link" title="Tiktok"><i class="fab fa-tiktok"></i></a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 KAPIFLY. Todos los derechos reservados.</p>
  </div>
</footer>
<script>
function togglePasswordVisibility(inputId, iconSpan) {
  const input = document.getElementById(inputId);
  const icon = iconSpan.querySelector('i');
  if (input.type === "password") {
    input.type = "text";
    icon.classList.remove('fa-eye');
    icon.classList.add('fa-eye-slash');
  } else {
    input.type = "password";
    icon.classList.remove('fa-eye-slash');
    icon.classList.add('fa-eye');
  }
}
</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll('.form-group input').forEach(function(input) {
    // Al cargar la página, marca los que ya tienen valor
    if (input.value) {
      input.classList.add('has-value');
    }
    // Al escribir, agrega o quita la clase
    input.addEventListener('input', function() {
      if (this.value) {
        this.classList.add('has-value');
      } else {
        this.classList.remove('has-value');
      }
    });
    // Para autocompletado (algunos navegadores)
    input.addEventListener('change', function() {
      if (this.value) {
        this.classList.add('has-value');
      } else {
        this.classList.remove('has-value');
      }
    });
  });
});

</script>
<script src="../JS DISEÑO/darkmode.js"></script>
</body>
</html>
