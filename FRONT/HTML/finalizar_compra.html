<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Finalizar Compra</title>
  <link rel="stylesheet" href="../CSS/header-footer.css"/>
  <link rel="stylesheet" href="../CSS/carrito.css"/>
</head>
<body>
<header class="site-header">
  <!-- ...header igual que los otros archivos... -->
</header>
<main>
  <h1>Finalizar Compra</h1>
  <form id="form-finalizar-compra">
    <label>Nombre: <input name="nombre" required></label><br>
    <label>Apellido: <input name="apellido" required></label><br>
    <label>DNI: <input name="dni" required></label><br>
    <label>Método de pago:
      <select name="metodo_pago" id="metodo_pago" required>
        <option value="">Seleccionar</option>
        <option value="tarjeta">Tarjeta</option>
        <option value="efectivo">Efectivo (30% de descuento)</option>
      </select>
    </label><br>
    <div id="tarjeta-fields" style="display:none;">
      <label>Número de tarjeta: <input name="numero_tarjeta"></label><br>
      <label>Nombre en tarjeta: <input name="nombre_tarjeta"></label><br>
      <label>Vencimiento: <input name="vencimiento" type="month"></label><br>
      <label>Código de seguridad: <input name="codigo_seguridad"></label><br>
    </div>
    <button type="submit">Confirmar compra</button>
    <div id="msg-finalizar"></div>
  </form>

  <h2>Insertar Paquete</h2>
  <form id="form-insert-paquete">
    <input type="hidden" name="tabla" value="paquetes">
    <input type="hidden" name="accion" value="insertar">
    <label>Nombre del viaje: <input name="nombre_viaje" required></label>
    <label>Imagen (URL o nombre): <input name="imagen" required></label>
    <label>Duración: <input name="duracion" required></label>
    <label>Incluye: <input name="incluye" required></label>
    <label>Precio aprox: <input name="precio_aprox" type="number" required></label>
    <button type="submit">Insertar Paquete</button>
    <div class="msg" id="msg-insert-paquete"></div>
  </form>
</main>
<script src="../../BACK/JS LOGICA/submitdata.js"></script>
<script>
new FormHandler({
  formSelector: "#form-finalizar-compra",
  endpoint: "../../BACK/PHP/finalizar_compra.php",
  messageTarget: document.getElementById('msg-finalizar'),
  onSuccess: () => {
    // Redirigir a confirmación si querés
    // window.location.href = "confirmacion.html";
  }
});

document.getElementById('metodo_pago').addEventListener('change', function() {
  document.getElementById('tarjeta-fields').style.display = this.value === 'tarjeta' ? 'block' : 'none';
});

new FormHandler({
  formSelector: "#form-insert-paquete",
  endpoint: "../../BACK/PHP/admin_abm_productos.php",
  messageTarget: document.getElementById("msg-insert-paquete")
});
</script>
<footer class="site-footer center">
  <p>&copy; 2025 ViajesMundo. Todos los derechos reservados.</p>
</footer>
</body>
</html>