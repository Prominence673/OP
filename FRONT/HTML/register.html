<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registrarse - ViajesMundo</title>
  <link rel="stylesheet" href="../CSS/form.css"/>
  <link rel="stylesheet" href="../CSS/header-footer.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-container">
      <h1>TRAVEL</h1>
      <nav class="main-nav">
        <ul class="nav-menu">
          <li><a href="index.html">Inicio</a></li>
          <li class="dropdown-parent">
            <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">
              Paquetes <i class="fa-solid fa-chevron-down"></i>
            </button>
            <ul class="submenu">
              <li><a href="#">Alquiler coches</a></li>
              <li><a href="paquetes.html">Paquetes turisticos</a></li>
              <li><a href="#">Estadias</a></li>
              <li><a href="#">Pasajes aéreos</a></li>
            </ul>
          </li>
          <li><a href="#contacto">Contacto</a></li>
        </ul>
      </nav>
      <div class="user-menu">
        <a href="carrito.html" aria-label="Ir al carrito de compras" class="icon-link">
          <i class="fa-solid fa-cart-shopping user-icon"></i>
        </a>
        <button id="user-menu-btn" aria-label="Menú de usuario" class="icon-btn">
          <i class="fa-solid fa-user user-icon"></i>
        </button>
        <ul class="dropdown">
          <li id="user1"></li>
          <li id="panel_usuario"><a href="panel_usuario.html">Panel</a></li>
          <li id="login_panel"><a href="login.html">Iniciar sesión</a></li>
          <li id="register_panel"><a href="register.html">Registrarse</a></li>
          <li><a href="#" id="logout">Cerrar Sesion</a></li>
        </ul>
      </div>
    </div>
  </header>

  <main>
    <div class="form-container">
      <h2>Crear Cuenta</h2>
      <form method="post" id="register">
        <div class="form-group">
          <i class="fa-solid fa-circle-user input-icon"></i>
          <input type="text" id="user" name="user" placeholder=" " required />
          <label for="user">Nombre de usuario:</label>
        </div>
        <div class="form-group">
          <i class="fa-solid fa-envelope input-icon"></i>
          <input type="email" id="email" name="email" placeholder=" " required />
          <label for="email">Correo electrónico:</label>
        </div>
        <div class="form-group password-wrapper">
          <i class="fa-solid fa-user-secret input-icon"></i>
          <input type="password" id="password" name="password" max="16" required placeholder=" " />
          <label for="password">Contraseña</label>
          <div id="password-rules">
            <p id="min-length">8 caracteres</p>
            <p id="lowercase">Una minúscula</p>
            <p id="uppercase">Una mayúscula</p>
            <p id="number">Un número</p>
            <p id="special">Un carácter especial @ # $ ^ & + = . ! ? - _ *</p>
          </div>
        </div>
        <div class="form-group">
          <i class="fa-solid fa-fingerprint input-icon"></i>
          <input type="password" id="confirm" name="confirm" required placeholder=" " />
          <label for="confirm">Confirmar contraseña</label>
        </div>
        <div class="custom-checkbox-group">
          <input type="checkbox" id="show-password" name="show-password" />
          <label for="show-password">Mostrar contraseña</label>
        </div>
        <div id="mensajeDiv"></div>
        <button type="submit">Registrarse</button>
      </form>
      <p>¿Ya tenés cuenta? <a href="login.html">Iniciar sesión</a></p>
      <script src="../../BACK/JS LOGICA/passParameters.js"></script>
      <script src="../../BACK/JS LOGICA/submitdata.js"></script>
      <script>
        //submitdata
        document.addEventListener("DOMContentLoaded", () => {
          new FormHandler({
            formSelector: "#register", //id del form
            endpoint: "../../BACK/PHP/register.php",  //PHP
            messageTarget: mensajeDiv, //mensaje
            onSuccess: () => { //esto redirige al usuario si se cargo los datos al servidor exitosamente
              window.location.href = "login.html";
            }
          });
        });
        //passParameters
        document.addEventListener("DOMContentLoaded", () => {
          new PasswordValidator({
            passwordSelector: "#password",
            confirmSelector: "#confirm",
            toggleSelector: "#show-password",
            rulesContainerSelector: "#password-rules",
            formSelector: "#register",
            ruleSelectors: {
              minLength: "#min-length",
              lowercase: "#lowercase",
              uppercase: "#uppercase",
              number: "#number",
              special: "#special"
            }
          });
        });
      </script>
      <script src="../../BACK/JS LOGICA/sessionActivate.js"></script>
      <script>
        const actions = new SessionActions();
        actions.Activate(["#panel_usuario", "#logout"], "none", "0.5");
        actions.InsertData("#user1", "nombre");
        actions.checkSessionAndRedirectIfLoggedIn("index.html");
      </script>
      <script src="../JS DISEÑO/menu.js"></script>
    </div>
  </main>

  <footer class="site-footer center">
    <p>&copy; 2025 ViajesMundo. Todos los derechos reservados.</p>
  </footer>
</body>
</html>