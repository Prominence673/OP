<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registrarse - ViajesMundo</title>
  <link rel="stylesheet" href="../CSS/form.css" />
</head>
<body>
  <main class="form-container">
    <h2>Crear Cuenta</h2>
    <form action="../../BACK/PHP/register.php" method="post" id="register">
      <label for="nombre">Nombre completo:</label>
      <input type="text" id="nombre" name="name" max=50 required />

      <label for="email">Correo electrónico:</label>
      <input type="email" id="email" name="email" max="320" required />

      <label for="password">Contraseña:</label>
      <input type="password" id="password" name="password" max="16" required />

      <label for="confirmar">Confirmar contraseña:</label>
      <input type="password" id="confirm" name="confirmar" required />
      <label for="showpassword">Mostrar Contraseña</label>
      <input type="checkbox" id="showpassword" name="showpass"> 
      <div id="password-rules">
        <p id="min-length">8 caracteres</p>
        <p id="lowercase">Una minúscula</p>
        <p id="uppercase">Una mayúscula</p>
        <p id="number">Un número</p>
        <p id="special">Un carácter especial @ # $ ^ & + = . ! ? - _ *</p>
      </div>
      </div>
      
      <script>
        const passwordInput = document.getElementById("password");
        const showPassword = document.getElementById("showpassword");
        const confirmInput = document.getElementById("confirm");
        const minLength = document.getElementById("min-length");
        const lowercase = document.getElementById("lowercase");
        const uppercase = document.getElementById("uppercase");
        const number = document.getElementById("number");
        const special = document.getElementById("special");
        const specialRegex = /[@#$^&+=.!?\-_*]/;
        const form = document.getElementById("register"); 
        
        showPassword.addEventListener("change", () => {
          const type = showPassword.checked ? "text" : "password";
          passwordInput.type = type;
          confirmInput.type = type;
        });

        passwordInput.addEventListener("input", () => {
          const value = passwordInput.value;

          toggleValid(minLength, value.length >= 8);
          toggleValid(lowercase, /[a-z]/.test(value));
          toggleValid(uppercase, /[A-Z]/.test(value));
          toggleValid(number, /\d/.test(value));
          toggleValid(special, specialRegex.test(value));
        });

        function toggleValid(element, condition) {
          element.style.color = condition ? "green" : "red";
        }

        form.addEventListener("submit", function (e) {
          const pwd = passwordInput.value;

          if (
            pwd.length < 8 ||
            !/[a-z]/.test(pwd) ||
            !/[A-Z]/.test(pwd) ||
            !/\d/.test(pwd) ||
            !specialRegex.test(pwd)
          ) {
            e.preventDefault();
            
          }
        });
      </script>
      <button type="submit">Registrarse</button>
    </form>
    <p>¿Ya tenés cuenta? <a href="login.html">Iniciar sesión</a></p>
  </main>
</body>
</html>
