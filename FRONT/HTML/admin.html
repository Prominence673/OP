<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FLY - Panel de Administraci칩n</title>
  <link rel="stylesheet" href="../CSS/admin.css" />
</head>
<body>

<div class="admin-container">
  <!-- Sidebar -->
  <aside class="admin-sidebar">
    <h2 class="logo">Admin</h2>
    <nav class="admin-nav">
      <ul>
        <li><a href="#" data-section="inicio">Inicio</a></li>
        <li>
          <a href="#" data-section="productos" class="has-submenu">Productos</a>
        <ul class="submenu">
          <li><a href="#" data-subsection="ver-productos">Ver productos</a></li>
          <li><a href="#" data-subsection="agregar-producto">Agregar producto</a></li>
          <li><a href="#" data-subsection="modificar-producto">Modificar producto</a></li>
          <li><a href="#" data-subsection="eliminar-producto">Eliminar producto</a></li>
        </ul>
        </li>
        <li><a href="#" data-section="usuarios">Usuarios</a></li>
        <li><a href="#" data-section="config">Configuraci칩n</a></li>
        <li><a href="#">Salir</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Contenido principal -->
  <main class="admin-main">
    <header class="admin-header">
      <h1>Panel de Administraci칩n</h1>
    </header>

  <section id="inicio" class="contenido-seccion">
    <div class="welcome-card">
      <div class="welcome-icon">游녦</div>
      <div class="welcome-text">
        <h2>춰Bienvenido, Administrador!</h2>
        <p>Gestion치 tus productos, usuarios y pedidos de forma r치pida y eficiente desde este panel.</p>
      </div>
    </div>
  </section>
      <div id="ver-productos" class="contenido-seccion" hidden>
        <h2>Listado de productos</h2>
        <p>Aqu칤 se muestran los productos registrados.</p>
      </div>

      <!-- AGREGAR PRODUCTO -->
      <div id="agregar-producto" class="contenido-seccion" hidden>
        <h2>Agregar nuevo producto</h2>
        <!-- Insertar Auto (con imagen) -->
        <form id="form-insert-auto" enctype="multipart/form-data" class="form-admin">
          <input type="hidden" name="tabla" value="autos">
          <input type="hidden" name="accion" value="insertar">
          <label>Nombre: <input name="nombre" required></label>
          <label>Tipo: <input name="tipo" required></label>
          <label>Capacidad: <input name="capacidad" type="number" required></label>
          <label>Precio: <input name="precio" type="number" required></label>
          <label>Imagen (URL o nombre): <input name="imagen" required></label>
          <button type="submit">Insertar Auto</button>
          <div class="msg" id="msg-insert-auto"></div>
        </form>

        <!-- Insertar Pasaje -->
        <form id="form-insert-pasaje" class="form-admin">
          <input type="hidden" name="tabla" value="pasajes">
          <input type="hidden" name="accion" value="insertar">
          <label>Nombre: <input name="nombre" required></label>
          <label>Imagen (URL o nombre): <input name="imagen" required></label>
          <label>Aerol칤nea: <input name="aerolinea" required></label>
          <label>Duraci칩n: <input name="duracion" required></label>
          <label>Precio desde: <input name="precio_desde" type="number" required></label>
          <label>Clase: <input name="clase" required></label>
          <button type="submit">Insertar Pasaje</button>
          <div class="msg" id="msg-insert-pasaje"></div>
        </form>

        <!-- Insertar Paquete -->
        <form id="form-insert-paquete" class="form-admin">
          <input type="hidden" name="tabla" value="paquetes">
          <input type="hidden" name="accion" value="insertar">
          <label>Nombre del viaje: <input name="nombre_viaje" required></label>
          <label>Imagen (URL o nombre): <input name="imagen" required></label>
          <label>Duraci칩n: <input name="duracion" required></label>
          <label>Incluye: <input name="incluye" required></label>
          <label>Precio aprox: <input name="precio_aprox" type="number" required></label>
          <button type="submit">Insertar Paquete</button>
          <div class="msg" id="msg-insert-paquete"></div>
        </form>

        <!-- Insertar Estad칤a -->
        <form id="form-insert-estadia" class="form-admin">
          <input type="hidden" name="tabla" value="estadias">
          <input type="hidden" name="accion" value="insertar">
          <label>Nombre: <input name="nombre" required></label>
          <label>Imagen (URL o nombre): <input name="imagen" required></label>
          <label>Ubicaci칩n: <input name="ubicacion" required></label>
          <label>Descripci칩n: <input name="descripcion" required></label>
          <label>Precio: <input name="precio" type="number" required></label>
          <button type="submit">Insertar Estad칤a</button>
          <div class="msg" id="msg-insert-estadia"></div>
        </form>
      </div>

      <!-- MODIFICAR PRODUCTO -->
      <div id="modificar-producto" class="contenido-seccion" hidden>
        <h2>Modificar Producto</h2>
        <form id="form-modificar-producto" class="form-admin">
          <label>Tabla:
            <select name="tabla" required>
              <option value="autos">Autos</option>
              <option value="pasajes">Pasajes</option>
              <option value="paquetes">Paquetes</option>
              <option value="estadias">Estad칤as</option>
            </select>
          </label>
          <label>ID: <input name="id" type="number" required></label>
          <label>Nombre: <input name="nombre"></label>
          <label>Imagen (URL o nombre): <input name="imagen"></label>
          <label>Tipo/Aerol칤nea/Duraci칩n/Ubicaci칩n: <input name="tipo"></label>
          <label>Capacidad/Clase/Incluye/Descripci칩n: <input name="capacidad"></label>
          <label>Precio/Precio desde/Precio aprox: <input name="precio"></label>
          <input type="hidden" name="accion" value="modificar">
          <button type="submit">Modificar</button>
          <div class="msg" id="msg-modificar"></div>
        </form>
      </div>

      <!-- ELIMINAR PRODUCTO -->
      <div id="eliminar-producto" class="contenido-seccion" hidden>
        <h2>Eliminar Producto</h2>
        <form id="form-borrar-producto" class="form-admin">
          <label>Tabla:
            <select name="tabla" required>
              <option value="autos">Autos</option>
              <option value="pasajes">Pasajes</option>
              <option value="paquetes">Paquetes</option>
              <option value="estadias">Estad칤as</option>
            </select>
          </label>
          <label>ID: <input name="id" type="number" required></label>
          <input type="hidden" name="accion" value="borrar">
          <button type="submit">Borrar</button>
          <div class="msg" id="msg-borrar"></div>
        </form>
      </div>
       <script src="../../BACK/JS LOGICA/submitdata.js"></script>
      <script src="../../BACK/JS LOGICA/submitfiles.js"></script>
      <script>
        // Insertar auto con imagen (usa FileUploader)
        new FileUploader({
          formSelector: "#form-insert-auto",
          fileInputName: "imagen",
          endpoint: "../../BACK/PHP/admin_abm_productos.php",
          messageTarget: document.getElementById("msg-insert-auto")
        });

        // Insertar pasaje
        new FormHandler({
          formSelector: "#form-insert-pasaje",
          endpoint: "../../BACK/PHP/admin_abm_productos.php",
          messageTarget: document.getElementById("msg-insert-pasaje")
        });

        // Insertar paquete
        new FormHandler({
          formSelector: "#form-insert-paquete",
          endpoint: "../../BACK/PHP/admin_abm_productos.php",
          messageTarget: document.getElementById("msg-insert-paquete")
        });

        // Insertar estad칤a
        new FormHandler({
          formSelector: "#form-insert-estadia",
          endpoint: "../../BACK/PHP/admin_abm_productos.php",
          messageTarget: document.getElementById("msg-insert-estadia")
        });

        // Modificar producto
        new FormHandler({
          formSelector: "#form-modificar-producto",
          endpoint: "../../BACK/PHP/admin_abm_productos.php",
          messageTarget: document.getElementById("msg-modificar")
        });

        // Borrar producto
        new FormHandler({
          formSelector: "#form-borrar-producto",
          endpoint: "../../BACK/PHP/admin_abm_productos.php",
          messageTarget: document.getElementById("msg-borrar")
        });

        // Mostrar/ocultar secciones seg칰n men칰
        document.querySelectorAll('.admin-nav a[data-section], .admin-nav a[data-subsection]').forEach(link => {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            // Oculta todas las secciones
            document.querySelectorAll('.contenido-seccion').forEach(sec => sec.hidden = true);

            // Muestra la secci칩n correspondiente
            if (this.dataset.section) {
              document.getElementById(this.dataset.section).hidden = false;
            }
            if (this.dataset.subsection) {
              document.getElementById(this.dataset.subsection).hidden = false;
            }
            // Mostrar modificar/eliminar seg칰n el submenu
            document.querySelectorAll('.admin-nav a[data-section], .admin-nav a[data-subsection]').forEach(link => {
            link.addEventListener('click', function(e) {
              e.preventDefault();
              // Oculta todas las secciones
              document.querySelectorAll('.contenido-seccion').forEach(sec => sec.hidden = true);

              // Muestra la secci칩n correspondiente
              if (this.dataset.section) {
                document.getElementById(this.dataset.section).hidden = false;
              }
              if (this.dataset.subsection) {
                document.getElementById(this.dataset.subsection).hidden = false;
              }
            });
          });
          });
        });
      </script>

      <div id="usuarios" class="contenido-seccion" hidden>
        <h2>Gesti칩n de usuarios</h2>
        <p>Administrar cuentas y permisos.</p>
      </div>

      <div id="config" class="contenido-seccion" hidden>
        <h2>Configuraci칩n</h2>
        <p>Ajustes generales del sistema.</p>
      </div>
    </section>

    <footer class="admin-footer">
      <p>&copy; 2025 - Panel de Administraci칩n</p>
    </footer>
      <script src="../../BACK/JS LOGICA/sessionActivate.js"></script>
      <script>
      const actions = new SessionActions();
      actions.Disabled(["#login_panel", "#register_panel"],"none", "0.5"); 
      actions.checkSessionAndRedirectIfNotLoggedIn("login.html");
      </script>
      <script src="../../BACK/JS LOGICA/user.js"></script>
      <script src="../JS DISE칌O/menu.js"></script>
      
  </main>
</div>

<script src="../JS DISE칌O/admin.js"></script>
</body>
</html>
